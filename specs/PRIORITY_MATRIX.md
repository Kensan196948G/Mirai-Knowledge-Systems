# 優先度マトリクス - Phase E/F/G

**作成日**: 2026-02-07
**作成者**: roadmap-planner SubAgent

---

## 📊 2軸評価マトリクス

### 評価軸

- **軸1**: ビジネス価値（1-5点）
  - ユーザー体験向上、経営層意思決定支援、ROI向上
- **軸2**: 実現容易性（1-5点）
  - 技術的難易度の逆算（難易度低 = 容易性高）

### マトリクス図

```
ビジネス価値
    ↑
  5 │ [E-4]★★★★★  [F-4]★★★★★        [G-3]★★★★★
    │  Quick Win    BI Dashboard      SubAgent
  4 │ [E-5]★★★★☆                      [G-4]★★★★☆
    │  CSP強化     [F-1]★★★★☆  [F-2]★★★★☆  API Gateway
  3 │ [E-1]★★★☆☆   [E-2]★★★★★        [G-1]★★★☆☆  [G-2]★★★☆☆
    │  モジュール化  N+1最適化       2FA拡張   双方向同期
  2 │ [E-3]★★☆☆☆                     [F-3]★★☆☆☆
    │  TODO削除                       モバイルアプリ
  1 │
    └─────────────────────────────────────────→
      1           2           3           4           5
                        実現容易性
```

---

## 🎯 Phase別優先度ランキング

### Phase E（技術的負債返済）

| 順位 | Phase | 名称 | ビジネス価値 | 実現容易性 | 総合スコア | 優先度 |
|------|-------|------|-------------|-----------|-----------|--------|
| **1** | **E-4** | **MS365プレビュー完成** | **5** | **5** | **10** | **P0（最優先）** |
| **2** | **E-2** | **パフォーマンス最適化** | **5** | **3** | **8** | **P1（高）** |
| **3** | **E-1** | **フロントエンドモジュール化** | **3** | **2** | **5** | **P1（高）** |
| **4** | **E-5** | **セキュリティ強化** | **4** | **3** | **7** | **P2（中）** |
| **5** | **E-3** | **技術的負債返済** | **2** | **4** | **6** | **P3（低）** |

### Phase F（新規価値創造）

| 順位 | Phase | 名称 | ビジネス価値 | 実現容易性 | 総合スコア | 優先度 |
|------|-------|------|-------------|-----------|-----------|--------|
| **1** | **F-4** | **BIダッシュボード** | **5** | **4** | **9** | **P0（最優先）** |
| **2** | **F-1** | **リアルタイム通知** | **4** | **3** | **7** | **P1（高）** |
| **3** | **F-2** | **AI支援機能** | **4** | **3** | **7** | **P1（高）** |
| **4** | **F-3** | **モバイルアプリ** | **2** | **2** | **4** | **P3（低）** |

### Phase G（アーキテクチャ強化）

| 順位 | Phase | 名称 | ビジネス価値 | 実現容易性 | 総合スコア | 優先度 |
|------|-------|------|-------------|-----------|-----------|--------|
| **1** | **G-3** | **SubAgent統合** | **5** | **1** | **6** | **P0（最高価値）** |
| **2** | **G-4** | **API Gateway** | **4** | **4** | **8** | **P1（高）** |
| **3** | **G-1** | **2FA拡張** | **3** | **5** | **8** | **P1（Quick Win）** |
| **4** | **G-2** | **MS365双方向同期** | **3** | **2** | **5** | **P2（中）** |

---

## 🚀 Quick Wins（短期高効果施策）

### TOP 5 Quick Wins

| 順位 | Phase | 施策 | 期間 | 工数 | 効果 | スコア |
|------|-------|------|------|------|------|--------|
| **🥇 1** | **E-4** | **MS365ファイルプレビュー完成** | **4-5日** | **28-40h** | **ユーザー体験向上★★★★★** | **10** |
| **🥈 2** | **E-2部分** | **N+1検出+主要3エンドポイント最適化** | **5日** | **32h** | **パフォーマンス体感向上★★★★☆** | **9** |
| **🥉 3** | **F-4部分** | **基本BIダッシュボード（KPI一覧）** | **7日** | **40h** | **経営層可視化★★★★★** | **9** |
| **4** | **E-3** | **TODO削除（7箇所）** | **4日** | **8-12h** | **コード品質向上★★★☆☆** | **6** |
| **5** | **G-1** | **2FA SMS拡張** | **3日** | **16h** | **セキュリティ選択肢増★★★☆☆** | **8** |

### Quick Wins実施推奨順序

```
Week 1:    E-4 (5日)
Week 2:    E-2部分 (5日) ※並列でE-1開始可能
Week 3:    F-4部分 (7日)
Week 4:    E-3 (4日)
Month 2:   G-1 (3日)
```

---

## 📈 ROI分析（投資対効果）

### Phase E

| Phase | 投資（工数） | 効果（ビジネス価値） | ROI | 評価 |
|-------|-------------|---------------------|-----|------|
| **E-4** | **28-40h** | **ユーザー体験向上（定量化困難）** | **高** | **★★★★★** |
| **E-2** | **56-64h** | **レスポンス時間50%短縮 → 検索効率30%向上** | **高** | **★★★★☆** |
| **E-1** | **56-68h** | **保守性向上 → 開発生産性20%向上（長期）** | **中** | **★★★☆☆** |
| **E-5** | **40h** | **セキュリティ脆弱性0件 → リスク低減** | **高** | **★★★★☆** |
| **E-3** | **28-32h** | **コード品質向上 → バグ率10%減少（長期）** | **中** | **★★★☆☆** |

### Phase F

| Phase | 投資（工数） | 効果（ビジネス価値） | ROI | 評価 |
|-------|-------------|---------------------|-----|------|
| **F-4** | **60-80h** | **経営層意思決定支援 → ROI可視化** | **高** | **★★★★★** |
| **F-1** | **60-80h** | **リアルタイム通知 → 相談対応時間30%短縮** | **高** | **★★★★☆** |
| **F-2** | **80-120h** | **AI推薦 → 検索効率30%向上、専門家マッチング精度80%** | **中** | **★★★★☆** |

### Phase G

| Phase | 投資（工数） | 効果（ビジネス価値） | ROI | 評価 |
|-------|-------------|---------------------|-----|------|
| **G-3** | **160-200h** | **開発生産性50%向上（自動レビューゲート）** | **高** | **★★★★★** |
| **G-4** | **48-64h** | **API統合コスト50%削減、Rate Limiting** | **高** | **★★★★☆** |
| **G-1** | **24-32h** | **セキュリティ選択肢増 → ユーザー満足度向上** | **中** | **★★★☆☆** |
| **G-2** | **80-120h** | **MS365双方向同期 → データ整合性向上** | **中** | **★★★☆☆** |

---

## 🎯 推奨実施順序（依存関係考慮）

### Critical Path（必須経路）

```
E-4 (Week 1-2)
  ↓
E-1 (Week 2-4)
  ↓
E-5 (Week 6-8)
  ↓
F-1 (Month 2)
  ↓
G-4 (Month 2)
  ↓
Phase G完了
```

### Parallel Path（並列実施可能）

```
Week 1-2:  E-4 単独
Week 3-5:  E-2 (E-1と並列可能)
Week 8-10: E-3 (E-5と並列可能)
Month 1:   F-4 (独立)
Month 1:   G-1 (独立)
Month 3-4: G-3 (独立、全フェーズに影響)
Month 5:   G-2 (独立)
```

---

## 📊 リスク × 優先度マトリクス

```
リスク影響度
    ↑
  5 │          [E-1]          [G-3]
    │        モジュール化     SubAgent
  4 │          [E-5]
    │        CSP強化
  3 │          [E-2]          [G-2]
    │      パフォーマンス   双方向同期
  2 │
    │          [E-4]          [G-1]  [G-4]
  1 │       プレビュー      2FA拡張  Gateway
    └─────────────────────────────────────→
      P3      P2      P1              P0
                    優先度
```

### リスク高・優先度高（要注意）

- **E-1**: モジュール化（大規模リファクタリング）→ 段階的実施必須
- **E-5**: CSP強化（サードパーティスクリプト影響）→ 段階的ロールアウト
- **G-3**: SubAgent統合（暴走リスク）→ 厳密な設計・テスト必須

### リスク低・優先度高（優先実施）

- **E-4**: MS365プレビュー完成
- **E-2**: パフォーマンス最適化
- **G-1**: 2FA拡張
- **G-4**: API Gateway

---

## 🔄 並列開発戦略

### Week 2-4: 2 SubAgent並列

```yaml
agents:
  - name: module-implementer
    task: E-1（フロントエンドモジュール化）
    files: [webui/core/*.js, webui/api/*.js]
    conflicts: なし

  - name: performance-optimizer
    task: E-2（N+1クエリ最適化）
    files: [backend/app_v2.py, backend/cache_config.py]
    conflicts: なし
```

### Month 1: 2 SubAgent並列

```yaml
agents:
  - name: bi-implementer
    task: F-4（BIダッシュボード）
    files: [backend/analytics/*.py, webui/bi-dashboard.*]
    conflicts: なし

  - name: auth-extender
    task: G-1（2FA拡張）
    files: [backend/auth/sms_manager.py, webui/mfa-sms.js]
    conflicts: なし
```

---

## ✅ 完了判定基準

### Phase E 完了判定

| 基準 | 目標 | 測定方法 |
|------|------|---------|
| innerHTML使用箇所 | 0箇所 | Grep検索 |
| TODO残留 | 0箇所 | Grep検索 |
| N+1クエリ数 | 0件 | SQLAlchemy debug toolbar |
| テストカバレッジ | 93%以上 | pytest-cov |
| OWASP ZAP脆弱性 | 0件 | 動的スキャン |

### Phase F 完了判定

| 基準 | 目標 | 測定方法 |
|------|------|---------|
| BI経営層利用率 | 80%以上 | アクセスログ分析 |
| 通知開封率 | 60%以上 | WebSocket統計 |
| AI推薦採用率 | 40%以上 | クリックスルー率 |

### Phase G 完了判定

| 基準 | 目標 | 測定方法 |
|------|------|---------|
| 2FA有効化率 | 80%以上 | ユーザーテーブル集計 |
| API Gateway経由率 | 100% | アクセスログ |
| 自動レビューゲート通過率 | 80%以上（1回目PASS） | SubAgent統計 |
| 双方向同期成功率 | 95%以上 | 同期履歴テーブル |

---

**作成完了**: 2026-02-07
**承認**: 未承認（team-leadレビュー待ち）
