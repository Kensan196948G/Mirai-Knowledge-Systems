# データ生成スクリプト - 使用方法

## 概要

詳細ページ表示用の大量ダミーデータを生成するスクリプトです。

## 生成されるデータ

### 1. ナレッジ詳細データ（100件）
- **ファイル**: `data/knowledge_details.json`
- **サイズ**: 約790KB
- **内容**:
  - ID、タイトル、概要
  - 本文（2000文字以上の詳細なコンテンツ）
  - カテゴリ、タグ（5-10個）
  - 作成者、作成日、更新日
  - 閲覧数、いいね数
  - 関連ナレッジID（5-10件）
  - コメント（各ナレッジに3-5件）
  - 編集履歴（2-3回）

### 2. SOP詳細データ（50件）
- **ファイル**: `data/sop_details.json`
- **サイズ**: 約315KB
- **内容**:
  - タイトル、目的、適用範囲
  - 手順（10-20ステップ）
  - チェックリスト項目（5-8項目）
  - 注意事項（3-5項目）
  - 改訂履歴（2-5回）
  - 関連SOP（3-6件）
  - 参考資料（2-4件）

### 3. 事故レポート詳細データ（30件）
- **ファイル**: `data/incidents_details.json`
- **サイズ**: 約194KB
- **内容**:
  - 発生日時、場所、重要度
  - 事故内容（詳細な説明、1000文字以上）
  - 原因分析（2-3項目）
  - 是正措置（3-5項目）
  - タイムライン（5-10イベント）
  - 関連写真（ダミー画像URL、2-5枚）
  - ステータス履歴（2-4回）

### 4. 専門家相談データ（40件）
- **ファイル**: `data/consultations_details.json`
- **サイズ**: 約518KB
- **内容**:
  - 質問内容
  - 回答（各質問に2-5件、500-1500文字）
  - ベストアンサー
  - カテゴリ、タグ（3-6個）
  - 閲覧数、役立った数
  - 回答者の肩書き

### 5. プロジェクトデータ（20件）
- **ファイル**: `data/projects.json`
- **サイズ**: 約44KB
- **内容**:
  - プロジェクト名、説明
  - 工区、工種
  - 開始日、終了日
  - 進捗率（0-100%）
  - 担当者（3-5名）
  - マイルストーン（5-10個）
  - ステータス
  - 予算

### 6. 専門家データ（20人）
- **ファイル**: `data/experts.json`
- **サイズ**: 約12KB
- **内容**:
  - 名前、メールアドレス
  - 所属部署
  - 専門分野（2-4分野）
  - オンライン状態
  - 回答数、ベストアンサー数
  - 評価（3.5-5.0）
  - 得意カテゴリ（2-4カテゴリ）
  - 資格（1-3個）

## 使用方法

### 基本的な実行

```bash
# backend ディレクトリで実行
cd /mnt/LinuxHDD/Mirai-Knowledge-Systems/backend
python3 generate_detailed_data.py
```

### 実行結果

```
=== 詳細ページ表示用ダミーデータ生成開始 ===

ナレッジ詳細データ生成中...
✅ ナレッジ詳細データ: 100件

SOP詳細データ生成中...
✅ SOP詳細データ: 50件

事故レポート詳細データ生成中...
✅ 事故レポート詳細データ: 30件

専門家相談詳細データ生成中...
✅ 専門家相談詳細データ: 40件

プロジェクトデータ生成中...
✅ プロジェクトデータ: 20件

専門家データ生成中...
✅ 専門家データ: 20件

=== すべてのデータ生成完了 ===
```

## データの特徴

### リアルな建設業界データ
- 実際の建設プロジェクトで使用される用語を使用
- 施工管理、品質管理、安全管理などの実務的な内容
- コンクリート打設、鋼橋塗装、砂防堰堤など具体的な工事内容

### 相互関連性
- ナレッジ同士の関連付け
- SOP間の参照関係
- プロジェクトへの紐付け
- 専門家と相談の関連

### 時系列データ
- 過去365日以内の作成日
- 編集履歴の時系列
- ステータス変更の履歴
- マイルストーンの進捗

### 詳細なメタデータ
- 閲覧数、いいね数などのエンゲージメント指標
- タグによる分類
- カテゴリ分け
- 優先度、重要度

## データのカスタマイズ

スクリプトを編集して、生成データをカスタマイズできます：

```python
# 件数の変更
knowledge_data = generate_knowledge_details(200)  # 100 → 200件

# 本文の長さ変更
content = generate_long_content(base_text, 3000)  # 2000 → 3000文字

# カテゴリの追加
CATEGORIES = ['施工計画', '品質管理', ..., '新カテゴリ']
```

## 注意事項

1. **既存ファイルの上書き**: 実行すると既存のJSONファイルが上書きされます
2. **ランダム生成**: 実行するたびに異なるデータが生成されます
3. **文字コード**: UTF-8で保存されます（日本語対応）
4. **ファイルサイズ**: 合計約1.8MBのデータが生成されます

## トラブルシューティング

### ファイルが生成されない
```bash
# data ディレクトリの存在確認
ls -la /mnt/LinuxHDD/Mirai-Knowledge-Systems/backend/data/

# 権限確認
chmod +x generate_detailed_data.py
```

### JSONフォーマットエラー
```bash
# JSONの検証
python3 -m json.tool data/knowledge_details.json > /dev/null
```

### メモリ不足
件数を減らして実行：
```python
# スクリプト内で調整
knowledge_data = generate_knowledge_details(50)  # 100 → 50件
```

## データの確認

### データ件数の確認
```bash
python3 -c "import json; data = json.load(open('data/knowledge_details.json')); print(f'件数: {len(data)}')"
```

### データ構造の確認
```bash
python3 -c "import json; data = json.load(open('data/knowledge_details.json')); print(json.dumps(data[0], ensure_ascii=False, indent=2))"
```

### ファイルサイズの確認
```bash
du -h data/*.json
```

## 関連スクリプト

- `generate_sample_data.py`: 基本的なサンプルデータ生成（既存）
- `generate_detailed_data.py`: 詳細ページ用の大量データ生成（本スクリプト）

## 更新履歴

- 2025-12-28: 初版作成
  - ナレッジ詳細データ（100件）
  - SOP詳細データ（50件）
  - 事故レポート詳細データ（30件）
  - 専門家相談データ（40件）
  - プロジェクトデータ（20件）
  - 専門家データ（20人）
