# ==========================================================
# 建設土木ナレッジシステム - 本番環境設定テンプレート
# ==========================================================
#
# 使用方法:
#   1. このファイルを .env.production にコピー
#   2. 各値を本番環境に合わせて編集
#   3. .env.production は .gitignore に含まれているため
#      リポジトリにはコミットされません
#
# ==========================================================

# 環境設定
MKS_ENV=production
MKS_DEBUG=false

# ==========================================================
# セキュリティ（必須）
# ==========================================================

# アプリケーション秘密鍵（32文字以上のランダム文字列を推奨）
# 生成例: python3 -c "import secrets; print(secrets.token_hex(32))"
MKS_SECRET_KEY=your-very-long-random-secret-key-here

# JWT秘密鍵（32文字以上のランダム文字列を推奨）
# 生成例: python3 -c "import secrets; print(secrets.token_hex(32))"
MKS_JWT_SECRET_KEY=your-very-long-random-jwt-secret-key-here

# ==========================================================
# HTTPS / SSL設定
# ==========================================================

# HTTPリクエストをHTTPSにリダイレクト
MKS_FORCE_HTTPS=true

# リバースプロキシ（Nginx等）のヘッダーを信頼
# Nginx経由の場合はtrue、直接接続の場合はfalse
MKS_TRUST_PROXY_HEADERS=true

# SSL証明書パス（Gunicornで直接SSL終端する場合）
# Nginx経由の場合はコメントアウト
# MKS_USE_SSL=true
# MKS_SSL_CERT_PATH=/etc/letsencrypt/live/api.example.com/fullchain.pem
# MKS_SSL_KEY_PATH=/etc/letsencrypt/live/api.example.com/privkey.pem

# ==========================================================
# HSTS設定
# ==========================================================

# HSTS（HTTP Strict Transport Security）を有効化
MKS_HSTS_ENABLED=true

# HSTSの有効期間（秒）- 1年 = 31536000
MKS_HSTS_MAX_AGE=31536000

# サブドメインにもHSTSを適用
MKS_HSTS_INCLUDE_SUBDOMAINS=true

# HSTSプリロードリスト登録（慎重に設定）
# 有効にする前に https://hstspreload.org/ の要件を確認
MKS_HSTS_PRELOAD=false

# ==========================================================
# CORS設定
# ==========================================================

# 許可するオリジン（カンマ区切り）
MKS_CORS_ORIGINS=https://example.com,https://app.example.com

# ==========================================================
# JWT設定
# ==========================================================

# アクセストークン有効期限（時間）
MKS_JWT_ACCESS_TOKEN_HOURS=1

# リフレッシュトークン有効期限（日）
MKS_JWT_REFRESH_TOKEN_DAYS=7

# ==========================================================
# データ保存先
# ==========================================================

# JSONデータディレクトリ
MKS_DATA_DIR=/var/lib/mirai-knowledge-system/data

# ログファイル
MKS_LOG_FILE=/var/log/mirai-knowledge-system/app.log
MKS_LOG_LEVEL=INFO

# ==========================================================
# Gunicorn設定
# ==========================================================

# ワーカー数（CPUコア数 * 2 + 1 を推奨）
MKS_GUNICORN_WORKERS=4

# スレッド数
MKS_GUNICORN_THREADS=2

# バインドアドレス（Nginx経由の場合は127.0.0.1を推奨）
MKS_GUNICORN_BIND=127.0.0.1:8000

# タイムアウト（秒）
MKS_GUNICORN_TIMEOUT=30

# グレースフルシャットダウンタイムアウト（秒）
MKS_GUNICORN_GRACEFUL_TIMEOUT=30

# ワーカークラス（sync/gevent/eventlet）
MKS_GUNICORN_WORKER_CLASS=sync

# ==========================================================
# Redis設定（オプション - レート制限用）
# ==========================================================

# Redis接続URL（設定しない場合はメモリベース）
# MKS_REDIS_URL=redis://localhost:6379/0

# ==========================================================
# PostgreSQL設定（オプション）
# ==========================================================

# PostgreSQL接続URL（設定しない場合はJSONファイルベース）
# MKS_DATABASE_URL=postgresql://user:password@localhost:5432/mirai_knowledge
