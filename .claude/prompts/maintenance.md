# 保守作業用プロンプト

## セッション開始時に使用

```
以降、日本語で対応願います。

## プロジェクト情報
- 名称: Mirai Knowledge Systems
- 環境: Ubuntu 24.04 + PostgreSQL 16 + systemd

## 保守作業ルール
1. 変更前にバックアップ確認
2. 本番影響を最小化
3. ロールバック手順を準備
4. 変更履歴をドキュメント化

## 禁止事項
- Docker使用禁止
- サービス停止を伴う作業は事前報告必須
- 本番データの削除は二重確認必須

## 今回の保守作業
[ここに具体的な作業内容を記載]

進捗はTodoWriteツールで管理してください。
```

## バグ修正パターン
```
以下のバグを修正してください：

現象: [バグの症状]
再現手順: [再現方法]
期待動作: [正しい動作]

調査手順：
1. ログ確認（journalctl -u mks-backend）
2. エラー箇所特定
3. 修正実装
4. テスト追加
5. 回帰テスト実行
```

## 依存関係更新パターン
```
Pythonパッケージの更新を行ってください：

対象: [パッケージ名]
現行: [現在のバージョン]
目標: [目標バージョン]

手順：
1. CHANGELOG確認
2. 破壊的変更の有無確認
3. テスト環境で更新テスト
4. 本番適用
```

## ログローテーション設定
```
ログローテーション設定を確認・調整してください：

対象ログ:
- /var/log/nginx/mks-*.log
- backend/logs/*.log

確認項目：
- ローテーション頻度
- 保持期間
- 圧縮設定
```

## データベースメンテナンス
```
PostgreSQLの定期メンテナンスを実行してください：

作業内容：
1. VACUUM ANALYZE実行
2. インデックス再構築確認
3. テーブル統計更新
4. 不要ログ削除

実行コマンドを提示してください。
```
