# テスト作業用プロンプト

## セッション開始時に使用

```
以降、日本語で対応願います。

## プロジェクト情報
- テストフレームワーク: pytest (Python), Jest (JavaScript), Playwright (E2E)
- カバレッジ目標: 90%以上（現在91%）
- テストディレクトリ: backend/tests/

## テスト方針
1. 新機能には必ずテスト追加
2. バグ修正には回帰テスト追加
3. E2Eテストは主要シナリオをカバー
4. モック使用は最小限

## 今回のテスト作業
[ここに具体的な作業内容を記載]
```

## テスト作成パターン

### 単体テスト追加
```
以下の機能の単体テストを作成してください：

対象: [ファイル/関数名]
テスト内容:
- 正常系: [期待動作]
- 異常系: [エラーケース]
- 境界値: [境界条件]

テストファイル: tests/unit/test_[名前].py
```

### 統合テスト追加
```
以下のAPIの統合テストを作成してください：

エンドポイント: [APIパス]
テストケース:
- 認証あり/なし
- 正常リクエスト
- バリデーションエラー
- 権限エラー

テストファイル: tests/integration/test_[名前].py
```

### E2Eテスト追加
```
以下のシナリオのE2Eテストを作成してください：

シナリオ: [ユーザーシナリオ名]
手順:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

検証項目:
- [確認内容1]
- [確認内容2]

テストファイル: tests/e2e/test_[名前].py
```

## テスト実行

### 全テスト実行
```
全テストを実行して結果を報告してください：

cd backend
python -m pytest tests/ -v --cov=. --cov-report=term-missing

結果確認項目：
- 失敗テスト数
- カバレッジ率
- 実行時間
```

### 特定テスト実行
```
以下のテストのみ実行してください：

対象: [テストファイル/テスト名]

python -m pytest tests/[パス] -v -s
```

### カバレッジ向上
```
カバレッジが低い箇所を特定し、テストを追加してください：

確認手順：
1. python -m pytest --cov=. --cov-report=html
2. htmlcov/index.htmlでカバレッジ確認
3. カバーされていない箇所を特定
4. テスト追加

目標: 90%以上維持
```

## セキュリティテスト
```
以下のセキュリティテストを実行してください：

対象: [エンドポイント/機能]

テスト項目：
- SQLインジェクション
- XSS
- CSRF
- 認証バイパス
- 権限昇格

scripts/security_scan.sh を使用してください。
```

## パフォーマンステスト
```
以下のパフォーマンステストを実施してください：

対象: [エンドポイント]

測定項目：
- レスポンス時間
- 同時接続数
- メモリ使用量

目標値：
- 平均レスポンス: 200ms以下
- P99レスポンス: 1秒以下
```
