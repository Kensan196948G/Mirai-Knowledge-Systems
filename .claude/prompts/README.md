# Claude Code プロンプトテンプレート集

## 概要

Mirai Knowledge Systems 本番運用向けのプロンプトテンプレート集です。
開発・保守・トラブルシューティング・本番運用の各シーンに対応したプロンプトを提供します。

## 使用方法

各プロンプトファイルの内容をClaude Codeセッション開始時に参照してください。

## プロンプト一覧

### 本番環境向けプロンプト（Phase C用）

| ファイル | 用途 | リスク | 所要時間 |
|----------|------|--------|----------|
| `PRODUCTION_OPERATIONS.md` | 本番運用ガイド | - | - |
| `TASK_TEMPLATES.md` | タスク別テンプレート | 各タスクによる | 各タスクによる |
| `AGENT_ROLES.md` | エージェント役割分担 | - | - |
| `SAFETY_CHECKLIST.md` | 安全チェックリスト | - | - |

### 開発環境向けプロンプト（既存）

| ファイル | 用途 | 主な機能 |
|----------|------|----------|
| `development.md` | 機能開発 | 新機能実装、リファクタリング |
| `maintenance.md` | 保守作業 | バグ修正、依存関係更新 |
| `troubleshooting.md` | 障害対応 | エラー調査、復旧作業 |
| `database.md` | DB操作 | マイグレーション、データ移行 |
| `testing.md` | テスト | テスト作成、カバレッジ向上 |
| `deployment.md` | デプロイ | 本番リリース、ロールバック |

## プロンプトの詳細

### 1. PRODUCTION_OPERATIONS.md（本番運用ガイド）

本番環境でのシステム変更・運用時のガイドラインです。

**主な内容:**
- 本番環境における絶対ルール
- 変更前の確認事項
- システム変更時の安全手順（コード変更/DB変更/設定変更）
- ロールバック手順
- 緊急時対応フロー
- 監視・確認方法
- 変更記録テンプレート

**使用シーン:**
- 本番環境での全ての変更作業前
- 緊急時の対応
- 定期的な運用確認

### 2. TASK_TEMPLATES.md（タスク別テンプレート）

本番環境でよくあるタスクの実行テンプレート集です。

**主な内容:**
- データベース移行タスク（PostgreSQL移行）
- セキュリティ更新タスク（依存関係更新、パスワードポリシー変更）
- パフォーマンスチューニングタスク（N+1クエリ最適化、インデックス追加）
- バグ修正タスク（API修正、フロントエンド修正）
- 機能追加タスク（新規APIエンドポイント、UI改善）

**使用シーン:**
- タスク実行時のテンプレートとして利用
- 作業手順の確認
- チェックリストの参照

### 3. AGENT_ROLES.md（エージェント役割分担）

Claude Codeの各機能（標準ツール/MCP/カスタムスキル）を効果的に使い分けるためのガイドです。

**主な内容:**
- 機能マトリクス（標準ツール/MCP/スキル/sequential-thinking）
- 各ツールの使用タイミングと実践例
- 効率的なワークフロー例（バグ修正/新機能開発/セキュリティ更新/パフォーマンス調査）
- 並列実行のベストプラクティス
- 状況別の推奨アプローチ

**使用シーン:**
- 複雑なタスクの実行計画策定
- ツール選択の判断
- パフォーマンス最適化

### 4. SAFETY_CHECKLIST.md（安全チェックリスト）

本番環境での作業時に使用する安全チェックリストです。

**主な内容:**
- 作業開始前の必須確認（レベル1〜3）
- コミット前チェックリスト（コード品質/テスト/Git操作）
- テスト実行必須項目（バックエンド/フロントエンド）
- バックアップ確認
- ロールバック準備
- セキュリティチェックリスト
- パフォーマンスチェック
- 本番デプロイ前チェック

**使用シーン:**
- 全ての本番変更前に必ず確認
- デプロイ前の最終確認
- 変更記録の作成

## ディレクトリ構造

```
.claude/prompts/
├── README.md                      # このファイル
├── PRODUCTION_OPERATIONS.md       # 本番運用ガイド（Phase C向け）
├── TASK_TEMPLATES.md              # タスク別テンプレート（Phase C向け）
├── AGENT_ROLES.md                 # エージェント役割分担（Phase C向け）
├── SAFETY_CHECKLIST.md            # 安全チェックリスト（Phase C向け）
├── development.md                 # 開発作業用
├── maintenance.md                 # 保守作業用
├── troubleshooting.md             # 障害対応用
├── database.md                    # データベース操作用
├── testing.md                     # テスト作業用
└── deployment.md                  # デプロイ作業用
```

## 推奨ワークフロー

### 本番環境での作業フロー

1. **SAFETY_CHECKLIST.md** で作業開始前の確認
2. **TASK_TEMPLATES.md** で該当タスクのテンプレート参照
3. **AGENT_ROLES.md** で効率的なツール選択
4. **PRODUCTION_OPERATIONS.md** で安全手順の確認
5. タスク実行
6. **SAFETY_CHECKLIST.md** でデプロイ前確認
7. 変更記録作成

### 緊急時の対応フロー

1. **PRODUCTION_OPERATIONS.md** の緊急時対応フローを参照
2. 影響範囲の特定
3. 暫定対策の実施
4. 恒久対策の計画

## プロンプトの組み合わせ例

### 例1: データベース移行

```
1. SAFETY_CHECKLIST.md: 作業開始前の確認
2. TASK_TEMPLATES.md: PostgreSQL移行タスクのテンプレート使用
3. AGENT_ROLES.md: 効率的なツール使い分け（Read/Edit/Bash並列実行）
4. PRODUCTION_OPERATIONS.md: ロールバック手順の確認
5. SAFETY_CHECKLIST.md: デプロイ後確認
```

### 例2: セキュリティ更新

```
1. SAFETY_CHECKLIST.md: セキュリティチェックリスト
2. TASK_TEMPLATES.md: 依存関係更新タスク
3. AGENT_ROLES.md: brave-search MCPで脆弱性調査
4. PRODUCTION_OPERATIONS.md: テスト実行・コミット
5. SAFETY_CHECKLIST.md: デプロイ前確認
```

## 更新履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| 2026-01-08 | 2.0 | Phase C向けプロンプト追加（本番運用ガイド/タスクテンプレート/エージェント役割分担/安全チェックリスト） |
| 2026-01-07 | 1.0 | 初版作成（開発環境向けプロンプト） |
